2025-05-15 21:44:04,437 - automate_newsletter       - INFO - Starting newsletter automation process
2025-05-15 21:44:04,438 - automate_newsletter       - INFO - Processing unsubscribes...
2025-05-15 21:44:04,438 - process_unsubscribes      - INFO - Starting unsubscribe processing...
2025-05-15 21:44:05,559 - process_unsubscribes      - INFO - No unsubscribed emails to process
2025-05-15 21:44:05,559 - automate_newsletter       - INFO - Unsubscribe processing completed successfully
2025-05-15 21:44:05,559 - automate_newsletter       - INFO - Processing newsletter for date: 2025-05-15
2025-05-15 21:44:05,560 - automate_newsletter       - INFO - Starting newsletter generation...
2025-05-15 21:44:05,561 - master_scraper            - INFO - Starting news scraper
2025-05-15 21:44:05,561 - master_scraper            - INFO - Scraping news for date: 2025-05-15
2025-05-15 21:44:05,561 - master_scraper            - INFO - Processing articles from visir
2025-05-15 21:44:06,338 - news_scraper_visir        - INFO - Retrieved 806 articles from visir RSS feed
2025-05-15 21:44:06,350 - news_scraper_visir        - INFO - Found 64 articles from visir for 2025-05-15
2025-05-15 21:44:06,350 - news_scraper_visir        - INFO - Processing article 1 of 64 from visir
2025-05-15 21:44:07,846 - news_scraper_visir        - INFO - Processing article 11 of 64 from visir
2025-05-15 21:44:09,493 - news_scraper_visir        - INFO - Processing article 21 of 64 from visir
2025-05-15 21:44:10,974 - news_scraper_visir        - INFO - Processing article 31 of 64 from visir
2025-05-15 21:44:12,403 - news_scraper_visir        - INFO - Processing article 41 of 64 from visir
2025-05-15 21:44:13,883 - news_scraper_visir        - INFO - Processing article 51 of 64 from visir
2025-05-15 21:44:15,678 - news_scraper_visir        - INFO - Processing article 61 of 64 from visir
2025-05-15 21:44:16,222 - news_scraper_visir        - INFO - Completed processing 64 articles from visir
2025-05-15 21:44:16,222 - master_scraper            - INFO - Successfully processed 64 articles from visir
2025-05-15 21:44:16,222 - master_scraper            - INFO - Processing articles from mbl
2025-05-15 21:44:19,206 - news_scraper_mbl          - INFO - Retrieved 452 articles from mbl RSS feed
2025-05-15 21:44:19,212 - news_scraper_mbl          - INFO - Found 138 articles from mbl for 2025-05-15
2025-05-15 21:44:19,212 - news_scraper_mbl          - INFO - Processing article 1 of 138 from mbl
2025-05-15 21:44:19,940 - news_scraper_mbl          - INFO - Processing article 11 of 138 from mbl
2025-05-15 21:44:20,684 - news_scraper_mbl          - INFO - Processing article 21 of 138 from mbl
2025-05-15 21:44:21,472 - news_scraper_mbl          - INFO - Processing article 31 of 138 from mbl
2025-05-15 21:44:24,893 - news_scraper_mbl          - INFO - Processing article 41 of 138 from mbl
2025-05-15 21:44:26,696 - news_scraper_mbl          - INFO - Processing article 51 of 138 from mbl
2025-05-15 21:44:29,702 - news_scraper_mbl          - INFO - Processing article 61 of 138 from mbl
2025-05-15 21:44:30,453 - news_scraper_mbl          - INFO - Processing article 71 of 138 from mbl
2025-05-15 21:44:36,687 - news_scraper_mbl          - INFO - Processing article 81 of 138 from mbl
2025-05-15 21:44:44,832 - news_scraper_mbl          - INFO - Processing article 91 of 138 from mbl
2025-05-15 21:44:51,055 - news_scraper_mbl          - INFO - Processing article 101 of 138 from mbl
2025-05-15 21:44:51,358 - news_scraper_mbl          - WARNING - Failed to get content for article: Samfélagsmiðlar nötra eftir tilkynningu Laufeyjar: „Ég mun hágrenja“ from https://www.mbl.is/k100/frettir/2025/05/15/samfelagsmidlar_notra_eftir_tilkynningu_laufeyjar_e/
2025-05-15 21:44:51,463 - news_scraper_mbl          - WARNING - Failed to get content for article: Stuðlabandið kynnir þjóðhátíðarlagið 2025: „Við létum Herjólf bíða“ from https://www.mbl.is/k100/frettir/2025/05/15/studlabandid_kynnir_thjodhatidarlagid_2025_vid_letu/
2025-05-15 21:44:51,620 - news_scraper_mbl          - WARNING - Failed to get content for article: Saga Garðars hvorki nakin né í strigapoka: „Nekt er svo opið hugtak“ from https://www.mbl.is/k100/frettir/2025/05/15/saga_gardars_hvorki_nakin_ne_i_strigapoka_nekt_er_s/
2025-05-15 21:44:51,923 - news_scraper_mbl          - INFO - Processing article 111 of 138 from mbl
2025-05-15 21:44:52,481 - news_scraper_mbl          - WARNING - Failed to get content for article: Finna ástina með glærusýningu: „Við ákváðum að hugsa út fyrir kassann“ from https://www.mbl.is/k100/frettir/2025/05/15/finna_astina_med_glaerusyningu_vid_akvadum_ad_hugsa/
2025-05-15 21:44:52,562 - news_scraper_mbl          - WARNING - Failed to get content for article: Köttur í Bentley bjargaði málunum from https://www.mbl.is/k100/frettir/2025/05/15/kottur_i_bentley_bjargadi_malunum/
2025-05-15 21:44:53,018 - news_scraper_mbl          - WARNING - Failed to get content for article: Er rasísk andstaða gegn fyrirtækjum stefna ríkisstjórnarinnar? from https://jonmagnusson.blog.is/blog/jonmagnusson/entry/2314120/
2025-05-15 21:44:53,172 - news_scraper_mbl          - WARNING - Failed to get content for article: Þetta finnst Milliliði um kannabisreykingarnar í dag from https://millilidir.blog.is/blog/millilidir/entry/2314119/
2025-05-15 21:44:53,172 - news_scraper_mbl          - INFO - Processing article 121 of 138 from mbl
2025-05-15 21:44:53,567 - news_scraper_mbl          - WARNING - Failed to get content for article: Misheppnaðar friðarviðræður? from https://geiragustsson.blog.is/blog/geiragustsson/entry/2314117/
2025-05-15 21:44:53,715 - news_scraper_mbl          - WARNING - Failed to get content for article: Alzheimer – slæmar fréttir og góðar from https://theyjolfs.blog.is/blog/theyjolfs/entry/2314116/
2025-05-15 21:44:53,920 - news_scraper_mbl          - WARNING - Failed to get content for article: Falsfréttamennska from https://frjalstland.blog.is/blog/frjalstland/entry/2314114/
2025-05-15 21:44:54,141 - news_scraper_mbl          - WARNING - Failed to get content for article: Óreiðuskoðun dagsins - 20250515 from https://gudjonelias.blog.is/blog/logostal/entry/2314113/
2025-05-15 21:44:54,625 - news_scraper_mbl          - WARNING - Failed to get content for article: Frú Sæland, frú Andersen - og síðust en ekki síst: Frú Ingveldur from https://joiragnars.blog.is/blog/joiragnars/entry/2314112/
2025-05-15 21:44:54,887 - news_scraper_mbl          - WARNING - Failed to get content for article: Signi á afmælisdag from https://helgiasmunds.blog.is/blog/helgiasmunds/entry/2314111/
2025-05-15 21:44:55,076 - news_scraper_mbl          - WARNING - Failed to get content for article: Vildi losna við Úlfar from https://stjornmalin.blog.is/blog/stjornmalin/entry/2314110/
2025-05-15 21:44:55,303 - news_scraper_mbl          - WARNING - Failed to get content for article: Aðeins á forsendum Viðreisnar from https://hughrif.blog.is/blog/hughrif/entry/2314109/
2025-05-15 21:44:55,559 - news_scraper_mbl          - WARNING - Failed to get content for article: "Allir vegir liggja til Rómar" (og nú til Brussel) from https://arnarthorjonsson.blog.is/blog/arnarthorjonsson/entry/2314108/
2025-05-15 21:44:55,803 - news_scraper_mbl          - WARNING - Failed to get content for article: Eru íslensk yfirvöld tilfinningalausar gyðinga- og Kanasleikjur? from https://tankur.blog.is/blog/tankur/entry/2314107/
2025-05-15 21:44:55,803 - news_scraper_mbl          - INFO - Processing article 131 of 138 from mbl
2025-05-15 21:44:56,024 - news_scraper_mbl          - WARNING - Failed to get content for article: Bjóðum Trump til Íslands! from https://biggilofts.blog.is/blog/biggilofts/entry/2314087/
2025-05-15 21:44:56,328 - news_scraper_mbl          - WARNING - Failed to get content for article: Húsfyllir og varnaðarorð from https://heimssyn.blog.is/blog/heimssyn/entry/2314104/
2025-05-15 21:44:56,972 - news_scraper_mbl          - WARNING - Failed to get content for article: Standard Ingu og Daða Más from https://bjorn.blog.is/blog/bjorn/entry/2314106/
2025-05-15 21:44:57,273 - news_scraper_mbl          - WARNING - Failed to get content for article: Trúin á sjálfstæði Íslands gæti verið að hverfa frá fólki, og sjálfstraust, í staðinn gæti verið að koma ótti við vald stofnana. Eða hefur eðli þjóðarinnar alltaf verið þannig? from https://ingolfursigurdsson.blog.is/blog/ingolfursigurdsson/entry/2314103/
2025-05-15 21:44:57,384 - news_scraper_mbl          - WARNING - Failed to get content for article: Vilja ekki sjá evruna from https://stjornmalin.blog.is/blog/stjornmalin/entry/2314102/
2025-05-15 21:44:57,939 - news_scraper_mbl          - WARNING - Failed to get content for article: ÞAÐ ÞARF AÐ VERA "FRIÐARVILJI" TIL STAÐAR HJÁ SELENSKÍ TIL AÐ PÚTIN SJÁI ÁSTÆÐU TIL AÐ MÆTA.... from https://johanneliasson.blog.is/blog/johanneliasson/entry/2314101/
2025-05-15 21:44:58,129 - news_scraper_mbl          - WARNING - Failed to get content for article: Sekt fyrir suma, sakleysi fyrir aðra: Tvöfaldir mælikvarðar í deilunni um Ísrael og Hamas from https://arnarfr.blog.is/blog/arnarfr/entry/2314079/
2025-05-15 21:44:58,911 - news_scraper_mbl          - WARNING - Failed to get content for article: Hafa stórveldi engar siðrænar viðmiðanir. from https://jonmagnusson.blog.is/blog/jonmagnusson/entry/2314100/
2025-05-15 21:44:58,911 - news_scraper_mbl          - INFO - Completed processing 113 articles from mbl
2025-05-15 21:44:58,911 - master_scraper            - INFO - Successfully processed 113 articles from mbl
2025-05-15 21:44:58,911 - master_scraper            - INFO - Processing articles from vb
2025-05-15 21:45:00,037 - news_scraper_vb           - INFO - Retrieved 150 articles from vb RSS feed
2025-05-15 21:45:00,039 - news_scraper_vb           - INFO - Found 38 articles from vb for 2025-05-15
2025-05-15 21:45:00,039 - news_scraper_vb           - INFO - Processing article 1 of 38 from vb
2025-05-15 21:45:03,455 - news_scraper_vb           - INFO - Processing article 11 of 38 from vb
2025-05-15 21:45:06,601 - news_scraper_vb           - INFO - Processing article 21 of 38 from vb
2025-05-15 21:45:10,540 - news_scraper_vb           - INFO - Processing article 31 of 38 from vb
2025-05-15 21:45:13,793 - news_scraper_vb           - INFO - Completed processing 38 articles from vb
2025-05-15 21:45:13,794 - master_scraper            - INFO - Successfully processed 38 articles from vb
2025-05-15 21:45:13,794 - master_scraper            - INFO - Processing articles from ruv
2025-05-15 21:45:15,074 - news_scraper_ruv          - INFO - Retrieved 160 articles from ruv RSS feed
2025-05-15 21:45:15,076 - news_scraper_ruv          - INFO - Found 59 articles from ruv for 2025-05-15
2025-05-15 21:45:15,076 - news_scraper_ruv          - INFO - Processing article 1 of 59 from ruv
2025-05-15 21:45:16,807 - news_scraper_ruv          - WARNING - Failed to get content for article: Þessi lönd keppa við Ísland á laugardaginn í Eurovision from https://nyr.ruv.is/frettir/menning-og-daegurmal/2025-05-15-thessi-lond-keppa-vid-island-a-laugardaginn-i-eurovision-443743/
2025-05-15 21:45:17,583 - news_scraper_ruv          - WARNING - Failed to get content for article: Sjáðu mörkin: Vestri og Fram í 8-liða úrslit from https://nyr.ruv.is/frettir/ithrottir/2025-05-15-sjadu-morkin-vestri-og-fram-i-8-lida-urslit-443905/
2025-05-15 21:45:17,940 - news_scraper_ruv          - INFO - Processing article 11 of 59 from ruv
2025-05-15 21:45:20,581 - news_scraper_ruv          - INFO - Processing article 21 of 59 from ruv
2025-05-15 21:45:23,268 - news_scraper_ruv          - INFO - Processing article 31 of 59 from ruv
2025-05-15 21:45:26,047 - news_scraper_ruv          - INFO - Processing article 41 of 59 from ruv
2025-05-15 21:45:27,989 - news_scraper_ruv          - WARNING - Failed to get content for article: Friðarviðræður í Tyrklandi: Ekkert útlit fyrir fund í dag from https://nyr.ruv.is/frettir/erlent/2025-05-15-fridarvidraedur-i-tyrklandi-ekkert-utlit-fyrir-fund-i-dag-443833/
2025-05-15 21:45:28,813 - news_scraper_ruv          - INFO - Processing article 51 of 59 from ruv
2025-05-15 21:45:31,291 - news_scraper_ruv          - INFO - Completed processing 56 articles from ruv
2025-05-15 21:45:31,292 - master_scraper            - INFO - Successfully processed 56 articles from ruv
2025-05-15 21:45:31,305 - scraper_utils             - INFO - Saved 271 articles to: src/outputs/news/json/news_articles_2025-05-15.json
2025-05-15 21:45:31,305 - master_scraper            - INFO - Successfully saved 271 articles to src/outputs/news/json/news_articles_2025-05-15.json
2025-05-15 21:45:31,345 - file_utils                - INFO - Loaded JSON file from: src/outputs/news/json/news_articles_2025-05-15.json
2025-05-15 21:45:31,345 - file_utils                - INFO - Loaded 271 articles from src/outputs/news/json/news_articles_2025-05-15.json
2025-05-15 21:45:31,345 - newsletter_generator      - INFO - Starting newsletter generation for 2025-05-15
2025-05-15 21:45:31,345 - newsletter_generator      - INFO - Generating newsletter for 2025-05-15
2025-05-15 21:45:31,346 - file_utils                - INFO - Loaded text file from: src/prompts/base_newsletter_prompt.txt
2025-05-15 21:45:31,346 - file_utils                - INFO - Loaded text file from: src/prompts/newsletter_daily_morning.txt
2025-05-15 21:45:31,551 - newsletter_generator      - INFO - Estimated prompt tokens: 222135
2025-05-15 21:46:47,405 - httpx                     - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 21:46:47,418 - newsletter_generator      - INFO - Completion tokens: 10025
2025-05-15 21:46:47,419 - newsletter_generator      - INFO - Total tokens used: 174425
2025-05-15 21:46:47,419 - newsletter_generator      - INFO - Newsletter generation completed
2025-05-15 21:46:47,423 - file_utils                - INFO - Saved JSON file to: src/outputs/newsletters/daily_morning/daily_morning_2025-05-15.json
2025-05-15 21:46:47,424 - newsletter_generator      - INFO - Newsletter generation completed successfully
2025-05-15 21:46:47,424 - newsletter_generator      - INFO - Starting URL cleaning process for 2025-05-15
2025-05-15 21:46:47,425 - newsletter_generator      - INFO - Starting URL cleaning process
2025-05-15 21:46:48,716 - newsletter_generator      - INFO - Summary URLs: 5/11 valid URLs
2025-05-15 21:46:48,716 - newsletter_generator      - INFO - Summary impact URLs: 0/0 valid URLs
2025-05-15 21:46:50,515 - newsletter_generator      - INFO - Key events URLs: 6/11 valid URLs
2025-05-15 21:46:51,003 - newsletter_generator      - INFO - domestic_news URLs: 3/5 valid URLs
2025-05-15 21:46:51,875 - newsletter_generator      - INFO - foreign_news URLs: 6/9 valid URLs
2025-05-15 21:46:52,556 - newsletter_generator      - INFO - business URLs: 2/4 valid URLs
2025-05-15 21:46:53,025 - newsletter_generator      - INFO - famous_people URLs: 3/4 valid URLs
2025-05-15 21:46:53,614 - newsletter_generator      - INFO - sports URLs: 3/6 valid URLs
2025-05-15 21:46:53,996 - newsletter_generator      - INFO - arts URLs: 2/3 valid URLs
2025-05-15 21:46:54,722 - newsletter_generator      - INFO - science URLs: 3/3 valid URLs
2025-05-15 21:46:54,722 - newsletter_generator      - INFO - URL cleaning completed. Total: 33/56 valid URLs (58.9% valid)
2025-05-15 21:46:54,725 - newsletter_generator      - INFO - Successfully cleaned URLs in: src/outputs/newsletters/daily_morning/daily_morning_2025-05-15.json
2025-05-15 21:46:54,725 - newsletter_formatter      - INFO - Starting newsletter formatting...
2025-05-15 21:46:54,726 - file_utils                - INFO - Loaded JSON file from: src/outputs/newsletters/daily_morning/daily_morning_2025-05-15.json
2025-05-15 21:46:54,726 - newsletter_formatter      - INFO - Processing newsletter from src/outputs/newsletters/daily_morning/daily_morning_2025-05-15.json
2025-05-15 21:46:54,726 - newsletter_formatter      - INFO - Content keys: ['main_headline', 'summary', 'summary_urls', 'summary_impact', 'summary_impact_urls', 'key_events', 'domestic_news', 'foreign_news', 'business', 'famous_people', 'sports', 'arts', 'science', 'closing_summary']
2025-05-15 21:46:54,727 - newsletter_formatter      - INFO - Newsletter HTML formatting completed
2025-05-15 21:46:54,730 - file_utils                - INFO - Saved text file to: src/outputs/formatted_newsletters/daily_morning/daily_morning_2025-05-15.html
2025-05-15 21:46:54,730 - newsletter_formatter      - INFO - Formatted newsletter saved to: src/outputs/formatted_newsletters/daily_morning/daily_morning_2025-05-15.html
2025-05-15 21:46:54,731 - automate_newsletter       - INFO - Newsletter formatting completed successfully
2025-05-15 21:46:54,731 - automate_newsletter       - INFO - Updating index...
2025-05-15 21:46:54,731 - update_index              - INFO - Starting index update...
2025-05-15 21:46:54,735 - update_index              - INFO - Found 8 newsletter files
2025-05-15 21:46:54,735 - update_index              - INFO - Updated latest newsletter link for date: 2025-05-15
2025-05-15 21:46:54,736 - update_index              - INFO - Updated newsletter list with 8 entries
2025-05-15 21:46:54,739 - update_index              - INFO - Successfully wrote updated index.html
2025-05-15 21:46:54,739 - update_index              - INFO - Index update completed successfully
2025-05-15 21:46:54,739 - automate_newsletter       - INFO - Updating index completed successfully
2025-05-15 21:46:54,739 - automate_newsletter       - INFO - Sending newsletter...
2025-05-15 21:46:56,407 - send_newsletter           - INFO - Running in dev mode, using test email
2025-05-15 21:46:56,408 - send_newsletter           - INFO - Dev mode: Subscribers: ['Richard@styrksyn.is', 'karirogg@gmail.com', 'hallaemilia@gmail.com', 'valdi7913@gmail.com', 'jasonandrigislason@gmail.com']
2025-05-15 21:46:56,409 - file_utils                - INFO - Loaded text file from: src/outputs/formatted_newsletters/daily_morning/daily_morning_2025-05-15.html
2025-05-15 21:46:57,866 - send_newsletter           - INFO - Newsletter sent to mrbadboy0110@gmail.com
2025-05-15 21:46:57,914 - send_newsletter           - INFO - Newsletter sent to 1 subscribers
2025-05-15 21:46:57,915 - automate_newsletter       - INFO - Newsletter sending completed successfully
2025-05-15 21:46:57,915 - automate_newsletter       - INFO - Newsletter automation completed successfully
