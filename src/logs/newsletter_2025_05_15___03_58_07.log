2025-05-15 03:58:07,171 - automate_newsletter       - INFO - Starting newsletter automation process
2025-05-15 03:58:07,171 - automate_newsletter       - INFO - Processing unsubscribes...
2025-05-15 03:58:07,171 - process_unsubscribes      - INFO - Starting unsubscribe processing...
2025-05-15 03:58:08,029 - process_unsubscribes      - INFO - No unsubscribed emails to process
2025-05-15 03:58:08,030 - automate_newsletter       - INFO - Unsubscribe processing completed successfully
2025-05-15 03:58:08,030 - automate_newsletter       - INFO - Processing newsletter for date: 2025-05-14
2025-05-15 03:58:08,030 - automate_newsletter       - INFO - Starting newsletter generation...
2025-05-15 03:58:08,030 - main                      - INFO - Starting news scraper
2025-05-15 03:58:14,144 - news_scraper_visir        - INFO - Retrieved 949 articles from visir RSS feed
2025-05-15 03:58:14,151 - news_scraper_visir        - INFO - Found 66 articles from visir for 2025-05-14
2025-05-15 03:58:14,151 - news_scraper_visir        - INFO - Processing article 1 of 66 from visir
2025-05-15 03:58:23,721 - news_scraper_visir        - INFO - Processing article 11 of 66 from visir
2025-05-15 03:58:33,339 - news_scraper_visir        - INFO - Processing article 21 of 66 from visir
2025-05-15 03:58:42,508 - news_scraper_visir        - INFO - Processing article 31 of 66 from visir
2025-05-15 03:58:51,592 - news_scraper_visir        - INFO - Processing article 41 of 66 from visir
2025-05-15 03:59:00,323 - news_scraper_visir        - INFO - Processing article 51 of 66 from visir
2025-05-15 03:59:09,173 - news_scraper_visir        - INFO - Processing article 61 of 66 from visir
2025-05-15 03:59:14,343 - news_scraper_visir        - INFO - Completed processing 66 articles from visir
2025-05-15 03:59:14,344 - main                      - INFO - Processed 66 Visir articles
2025-05-15 03:59:31,969 - news_scraper_mbl          - INFO - Retrieved 462 articles from mbl RSS feed
2025-05-15 03:59:31,972 - news_scraper_mbl          - INFO - Found 135 articles from mbl for 2025-05-14
2025-05-15 03:59:31,972 - news_scraper_mbl          - INFO - Processing article 1 of 135 from mbl
2025-05-15 03:59:40,440 - news_scraper_mbl          - INFO - Processing article 11 of 135 from mbl
2025-05-15 03:59:44,339 - news_scraper_mbl          - WARNING - Failed to get content for article: ÁTVR-pokar og páfalegur reykur from https://www.mbl.is/k100/frettir/2025/05/14/atvr_pokar_og_pafalegur_reykur/
2025-05-15 03:59:52,032 - news_scraper_mbl          - INFO - Processing article 21 of 135 from mbl
2025-05-15 03:59:59,678 - news_scraper_mbl          - INFO - Processing article 31 of 135 from mbl
2025-05-15 04:00:09,710 - news_scraper_mbl          - INFO - Processing article 41 of 135 from mbl
2025-05-15 04:00:17,333 - news_scraper_mbl          - INFO - Processing article 51 of 135 from mbl
2025-05-15 04:00:25,436 - news_scraper_mbl          - INFO - Processing article 61 of 135 from mbl
2025-05-15 04:00:38,466 - news_scraper_mbl          - INFO - Processing article 71 of 135 from mbl
2025-05-15 04:00:56,868 - news_scraper_mbl          - INFO - Processing article 81 of 135 from mbl
2025-05-15 04:01:02,604 - news_scraper_mbl          - INFO - Processing article 91 of 135 from mbl
2025-05-15 04:01:10,044 - news_scraper_mbl          - INFO - Processing article 101 of 135 from mbl
2025-05-15 04:01:12,475 - news_scraper_mbl          - WARNING - Failed to get content for article: Frá fatastærð í brjóst: Umdeild textabreyting gerir allt vitlaust from https://www.mbl.is/k100/frettir/2025/05/14/fra_fatastaerd_i_brjost_umdeild_textabreyting_gerir/
2025-05-15 04:01:19,762 - news_scraper_mbl          - INFO - Processing article 111 of 135 from mbl
2025-05-15 04:01:29,960 - news_scraper_mbl          - WARNING - Failed to get content for article: Baráttumál kvenna á ýmsum aldri fyrr og nú. from https://joiragnars.blog.is/blog/joiragnars/entry/2314089/
2025-05-15 04:01:30,906 - news_scraper_mbl          - WARNING - Failed to get content for article: Ritgerðin "Áhugaverð heimspeki" efrir Milliliði varðandi bókina Gorgías from https://millilidir.blog.is/blog/millilidir/entry/2314086/
2025-05-15 04:01:31,824 - news_scraper_mbl          - WARNING - Failed to get content for article: "Snýtubréf" Macron, Mc-skeið Merz, lygar Trump & panik á litla Rúv from https://hallurhallsson.blog.is/blog/hallurhallsson/entry/2314085/
2025-05-15 04:01:32,911 - news_scraper_mbl          - WARNING - Failed to get content for article: Að stimpla sig út úr umræðu from https://geiragustsson.blog.is/blog/geiragustsson/entry/2314084/
2025-05-15 04:01:33,827 - news_scraper_mbl          - WARNING - Failed to get content for article: Nálgumst hratt einræði from https://noldrarinn.blog.is/blog/noldrarinn/entry/2314083/
2025-05-15 04:01:33,827 - news_scraper_mbl          - INFO - Processing article 121 of 135 from mbl
2025-05-15 04:01:34,715 - news_scraper_mbl          - WARNING - Failed to get content for article: Hann var rekinn ... from https://falconer.blog.is/blog/falconer/entry/2314082/
2025-05-15 04:01:35,547 - news_scraper_mbl          - WARNING - Failed to get content for article: Óreiðuskoðanaröskun dagsins - 20250514 from https://gudjonelias.blog.is/blog/logostal/entry/2314081/
2025-05-15 04:01:36,273 - news_scraper_mbl          - WARNING - Failed to get content for article: Af vottuðum Húsrottum, heimsvaldakerfisins from https://gudjonelias.blog.is/blog/logostal/entry/2314080/
2025-05-15 04:01:37,404 - news_scraper_mbl          - WARNING - Failed to get content for article: Evrópa á fleygiferð? from https://biggilofts.blog.is/blog/biggilofts/entry/2314072/
2025-05-15 04:01:38,965 - news_scraper_mbl          - WARNING - Failed to get content for article: Hreinskilni skortir vegna ESB from https://bjorn.blog.is/blog/bjorn/entry/2314078/
2025-05-15 04:01:39,753 - news_scraper_mbl          - WARNING - Failed to get content for article: Evrópa og ósýnilegi óvinurinn: Klofningur, vantraust og sjálfseyðingarmenning from https://arnarfr.blog.is/blog/arnarfr/entry/2314077/
2025-05-15 04:01:40,972 - news_scraper_mbl          - WARNING - Failed to get content for article: Sparnaðarráð from https://jensgud.blog.is/blog/jensgud/entry/2314068/
2025-05-15 04:01:42,249 - news_scraper_mbl          - WARNING - Failed to get content for article: REYKAVÍKURBORG ER ÖRUGGLEGA EKKI EINA SVEITARFÉLAGIÐ SEM FER SVONA MEÐ FJÁRMAGNIÐ SEM "ÆTTI" AÐ RENNA TIL MENNTAMÁLA..... from https://johanneliasson.blog.is/blog/johanneliasson/entry/2314075/
2025-05-15 04:01:43,237 - news_scraper_mbl          - WARNING - Failed to get content for article: Sjálfsagt réttlætismál fyrir þjóðina að losa sig við útrásarpólitíkusa í merki snáksins from https://gustafskulason.blog.is/blog/gustafskulason/entry/2314074/
2025-05-15 04:01:44,120 - news_scraper_mbl          - WARNING - Failed to get content for article: Engu er líkara en að menntun íslensku læknanna hafi dregist aftur úr from https://theyjolfs.blog.is/blog/theyjolfs/entry/2314073/
2025-05-15 04:01:44,120 - news_scraper_mbl          - INFO - Processing article 131 of 135 from mbl
2025-05-15 04:01:44,939 - news_scraper_mbl          - WARNING - Failed to get content for article: Hvað kallast "kalkúleruð" áhætta ef enginn hefur raunverulega metið áhættuna? from https://arnarthorjonsson.blog.is/blog/arnarthorjonsson/entry/2314071/
2025-05-15 04:01:45,880 - news_scraper_mbl          - WARNING - Failed to get content for article: Berufsverbot from https://jonmagnusson.blog.is/blog/jonmagnusson/entry/2314070/
2025-05-15 04:01:46,634 - news_scraper_mbl          - WARNING - Failed to get content for article: Hví var Úlfar rekinn? from https://stjornmalin.blog.is/blog/stjornmalin/entry/2314069/
2025-05-15 04:01:47,904 - news_scraper_mbl          - WARNING - Failed to get content for article: Helgi Seljan og Þórður Snær: félagar í fréttahönnun from https://pallvil.blog.is/blog/pall_vilhjalmsson/entry/2314060/
2025-05-15 04:01:48,642 - news_scraper_mbl          - WARNING - Failed to get content for article: Pravda Down Under from https://formannslif.blog.is/blog/formannslif/entry/2314067/
2025-05-15 04:01:48,643 - news_scraper_mbl          - INFO - Completed processing 113 articles from mbl
2025-05-15 04:01:48,643 - main                      - INFO - Processed 113 MBL articles
2025-05-15 04:01:50,025 - news_scraper_vb           - INFO - Retrieved 150 articles from vb RSS feed
2025-05-15 04:01:50,026 - news_scraper_vb           - INFO - Found 44 articles from vb for 2025-05-14
2025-05-15 04:01:50,026 - news_scraper_vb           - INFO - Processing article 1 of 44 from vb
2025-05-15 04:01:54,409 - news_scraper_vb           - INFO - Processing article 11 of 44 from vb
2025-05-15 04:02:00,133 - news_scraper_vb           - INFO - Processing article 21 of 44 from vb
2025-05-15 04:02:10,436 - news_scraper_vb           - INFO - Processing article 31 of 44 from vb
2025-05-15 04:02:15,857 - news_scraper_vb           - INFO - Processing article 41 of 44 from vb
2025-05-15 04:02:17,300 - news_scraper_vb           - INFO - Completed processing 44 articles from vb
2025-05-15 04:02:17,301 - main                      - INFO - Processed 44 VB articles
2025-05-15 04:02:19,166 - news_scraper_ruv          - INFO - Retrieved 160 articles from ruv RSS feed
2025-05-15 04:02:19,167 - news_scraper_ruv          - INFO - Found 50 articles from ruv for 2025-05-14
2025-05-15 04:02:19,167 - news_scraper_ruv          - INFO - Processing article 1 of 50 from ruv
2025-05-15 04:02:20,494 - news_scraper_ruv          - INFO - Processing article 11 of 50 from ruv
2025-05-15 04:02:21,556 - news_scraper_ruv          - WARNING - Failed to get content for article: Sjáðu: Stjarnan þurfti vítaspyrnukeppni gegn Kára from https://nyr.ruv.is/frettir/ithrottir/2025-05-14-sjadu-stjarnan-thurfti-vitaspyrnukeppni-gegn-kara-443765/
2025-05-15 04:02:21,636 - news_scraper_ruv          - INFO - Processing article 21 of 50 from ruv
2025-05-15 04:02:23,212 - news_scraper_ruv          - INFO - Processing article 31 of 50 from ruv
2025-05-15 04:02:25,729 - news_scraper_ruv          - INFO - Processing article 41 of 50 from ruv
2025-05-15 04:02:27,717 - news_scraper_ruv          - INFO - Completed processing 49 articles from ruv
2025-05-15 04:02:27,718 - main                      - INFO - Processed 49 RUV articles
2025-05-15 04:02:27,726 - main                      - INFO - Saved 272 total articles to src/outputs/news/json/news_articles_2025-05-14.json
2025-05-15 04:02:27,726 - main                      - INFO - Starting newsletter generator
2025-05-15 04:02:27,726 - main                      - INFO - Generating newsletter...
2025-05-15 04:02:27,730 - newsletter_generator      - INFO - Loaded 272 articles from src/outputs/news/json/news_articles_2025-05-14.json
2025-05-15 04:02:27,730 - newsletter_generator      - INFO - Generating newsletter for 2025-05-14
2025-05-15 04:02:28,519 - newsletter_generator      - INFO - Estimated prompt tokens: 225421
2025-05-15 04:03:43,949 - httpx                     - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 04:03:43,954 - newsletter_generator      - INFO - Completion tokens: 10478
2025-05-15 04:03:43,954 - newsletter_generator      - INFO - Total tokens used: 177219
2025-05-15 04:03:43,955 - newsletter_generator      - INFO - Newsletter generation completed
2025-05-15 04:03:43,956 - newsletter_generator      - INFO - Saved newsletter to: src/outputs/newsletters/daily_morning/daily_morning_2025-05-14.json
2025-05-15 04:03:43,956 - main                      - INFO - Saved newsletter initial content to: src/outputs/newsletters/daily_morning/daily_morning_2025-05-14.json
2025-05-15 04:03:43,958 - main                      - INFO - Starting URL cleaning process
2025-05-15 04:03:43,958 - newsletter_generator      - INFO - Starting URL cleaning process
2025-05-15 04:03:56,944 - newsletter_generator      - INFO - Summary URLs: 5/16 valid URLs
2025-05-15 04:03:56,944 - newsletter_generator      - INFO - Summary impact URLs: 0/0 valid URLs
2025-05-15 04:04:05,972 - newsletter_generator      - INFO - Key events URLs: 7/12 valid URLs
2025-05-15 04:04:08,743 - newsletter_generator      - INFO - domestic_news URLs: 5/6 valid URLs
2025-05-15 04:04:10,753 - newsletter_generator      - INFO - foreign_news URLs: 4/6 valid URLs
2025-05-15 04:04:14,537 - newsletter_generator      - INFO - business URLs: 4/6 valid URLs
2025-05-15 04:04:17,813 - newsletter_generator      - INFO - famous_people URLs: 4/4 valid URLs
2025-05-15 04:04:23,935 - newsletter_generator      - INFO - sports URLs: 2/5 valid URLs
2025-05-15 04:04:26,868 - newsletter_generator      - INFO - arts URLs: 2/3 valid URLs
2025-05-15 04:04:28,201 - newsletter_generator      - INFO - science URLs: 1/3 valid URLs
2025-05-15 04:04:28,202 - newsletter_generator      - INFO - URL cleaning completed. Total: 34/61 valid URLs (55.7% valid)
2025-05-15 04:04:28,203 - main                      - INFO - Successfully cleaned URLs in: src/outputs/newsletters/daily_morning/daily_morning_2025-05-14.json
2025-05-15 04:04:28,203 - main                      - INFO - Starting newsletter formatter
2025-05-15 04:04:28,203 - main                      - INFO - Formatting newsletter...
2025-05-15 04:04:28,204 - newsletter_formatter      - INFO - Found keys in newsletter content: ['main_headline', 'summary', 'summary_urls', 'summary_impact', 'summary_impact_urls', 'key_events', 'domestic_news', 'foreign_news', 'business', 'famous_people', 'sports', 'arts', 'science', 'closing_summary']
2025-05-15 04:04:28,204 - newsletter_formatter      - INFO - Newsletter HTML formatting completed
2025-05-15 04:04:28,205 - newsletter_formatter      - INFO - Saved formatted newsletter to: src/outputs/formatted_newsletters/daily_morning/daily_morning_2025-05-14.html
2025-05-15 04:04:28,205 - main                      - INFO - Formatted newsletter saved to: src/outputs/formatted_newsletters/daily_morning/daily_morning_2025-05-14.html
2025-05-15 04:04:28,205 - automate_newsletter       - INFO - Newsletter generation completed successfully
2025-05-15 04:04:28,205 - automate_newsletter       - INFO - Updating index...
2025-05-15 04:04:28,205 - update_index              - INFO - Starting index update...
2025-05-15 04:04:28,208 - update_index              - INFO - Found 7 newsletter files
2025-05-15 04:04:28,208 - update_index              - INFO - Updated latest newsletter link for date: 2025-05-14
2025-05-15 04:04:28,209 - update_index              - INFO - Updated newsletter list with 7 entries
2025-05-15 04:04:28,211 - update_index              - INFO - Successfully wrote updated index.html
2025-05-15 04:04:28,211 - update_index              - INFO - Index update completed successfully
2025-05-15 04:04:28,211 - automate_newsletter       - INFO - Updating index completed successfully
2025-05-15 04:04:28,211 - automate_newsletter       - INFO - Sending newsletter...
2025-05-15 04:04:28,880 - send_newsletter           - INFO - Found newsletter file: src/outputs/formatted_newsletters/daily_morning/daily_morning_2025-05-14.html
2025-05-15 04:04:30,502 - send_newsletter           - INFO - Newsletter sent to mrbadboy0110@gmail.com
2025-05-15 04:04:30,517 - send_newsletter           - INFO - Newsletter sent to 1 subscribers
2025-05-15 04:04:30,517 - automate_newsletter       - INFO - Newsletter sending completed successfully
2025-05-15 04:04:30,517 - automate_newsletter       - INFO - Newsletter automation completed successfully
